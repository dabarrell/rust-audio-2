#!/bin/bash

# Set the necessary flags for atomics support
export RUSTFLAGS="-C target-feature=+atomics,+bulk-memory,+mutable-globals"

# Set default output directory
OUT_DIR="../public/wasm"

# Override output directory if argument is provided
if [ $# -eq 1 ]; then
    OUT_DIR="$1"
fi

# Build the WASM module
wasm-pack build --target web --out-dir "../$OUT_DIR" --no-pack crate/
